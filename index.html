<!DOCTYPE html>
<html>

<head>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
        google.charts.load('current', { 'packages': ['corechart'] });
        google.charts.setOnLoadCallback(fetchFirebaseData);

        function fetchFirebaseData() {
            // ðŸ”¥ Replace this with your Firebase Database URL
            var firebaseUrl = "https://beeguard-6b72f-default-rtdb.firebaseio.com/tempextData.json";

            fetch(firebaseUrl)
                .then(response => response.json())
                .then(data => {
                    drawChart(data);
                })
                .catch(error => console.error("Error fetching data:", error));
        }

        function drawChart(firebaseData) {
            var dataArray = [['Time', 'Value']]; // Google Charts expects an array

            // Loop through Firebase data and convert it into Google Charts format
            for (var key in firebaseData) {
                if (firebaseData.hasOwnProperty(key)) {
                    var timestamp = key;  // Assuming key is the timestamp
                    var value = firebaseData[key]; // Assuming value is stored here

                    dataArray.push([timestamp, value]);
                }
            }

            var data = google.visualization.arrayToDataTable(dataArray);

            var options = {
                title: 'Live Data from Firebase',
                curveType: 'function',
                legend: { position: 'bottom' }
            };

            var chart = new google.visualization.LineChart(document.getElementById('curve_chart'));
            chart.draw(data, options);
        }
    </script>
</head>

<body>
    <div id="curve_chart" style="width: 100%; height: 500px;"></div>
</body>

</html>